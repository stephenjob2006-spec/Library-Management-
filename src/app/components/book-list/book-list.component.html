<div class="book-list-container">
  <div class="header">
    <h1>Browse Books</h1>
    <p class="subtitle">Explore our collection of {{ books.length }} books</p>
  </div>

  <div class="filters-section">
    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Search books...</mat-label>
      <input matInput [(ngModel)]="searchQuery" (ngModelChange)="onSearchChange()" 
             placeholder="Search by title, author, or ISBN">
      <mat-icon matPrefix>search</mat-icon>
    </mat-form-field>

    <div class="category-chips">
      <mat-chip-listbox>
        <mat-chip-option 
          *ngFor="let category of categories" 
          [selected]="selectedCategory === category"
          (click)="selectCategory(category)">
          {{ category }}
        </mat-chip-option>
      </mat-chip-listbox>
    </div>
  </div>

  <div class="results-info">
    <p>Showing {{ filteredBooks.length }} of {{ books.length }} books</p>
  </div>

  <div class="loading-spinner" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>

  <div class="books-grid" *ngIf="!loading">
    <mat-card *ngFor="let book of filteredBooks" class="book-card">
      <img mat-card-image [src]="book.coverImage" [alt]="book.title">
      <mat-card-header>
        <mat-card-title>{{ book.title }}</mat-card-title>
        <mat-card-subtitle>by {{ book.author }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="book-info">
          <p class="category-badge">{{ book.category }}</p>
          <p class="year">Published: {{ book.publishedYear }}</p>
          <p class="isbn">ISBN: {{ book.isbn }}</p>
          <p class="availability" [ngClass]="getAvailabilityClass(book)">
            <mat-icon>{{ book.isAvailable() ? 'check_circle' : 'cancel' }}</mat-icon>
            {{ getAvailabilityText(book) }}
          </p>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" [routerLink]="['/books', book.id]">
          <mat-icon>info</mat-icon>
          View Details
        </button>
        <button mat-raised-button color="accent" 
                [routerLink]="['/borrow']" [queryParams]="{bookId: book.id}"
                [disabled]="!book.isAvailable()">
          <mat-icon>add_circle</mat-icon>
          Borrow
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="no-results" *ngIf="!loading && filteredBooks.length === 0">
    <mat-icon>search_off</mat-icon>
    <h2>No books found</h2>
    <p>Try adjusting your search or filter criteria</p>
  </div>
</div>
